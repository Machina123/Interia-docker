{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":5,"links":[],"panels":[{"datasource":null,"description":"","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"hideFrom":{"legend":false,"tooltip":false,"viz":false}},"mappings":[]},"overrides":[]},"gridPos":{"h":9,"w":12,"x":0,"y":0},"id":2,"options":{"displayLabels":["name","percent"],"legend":{"displayMode":"table","placement":"right","values":["value","percent"]},"pieType":"pie","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"tooltip":{"mode":"multi"}},"pluginVersion":"8.1.2","targets":[{"expr":"sum (\n  count_over_time(\n    {source=\"docker\", container_id=~\".*_haproxy_.*\"}\n    | logfmt\n    | data_termination_state != \"\"\n    | __error__ = \"\" [$__range]\n  )\n) by (data_termination_state)","instant":false,"range":true,"refId":"A"}],"title":"Termination state overview","transformations":[{"id":"labelsToFields","options":{"valueLabel":"data_termination_state"}}],"type":"piechart"},{"datasource":null,"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":9,"w":12,"x":12,"y":0},"id":4,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"multi"}},"targets":[{"expr":"sum (\n  avg_over_time(\n    {source=\"docker\", container_id=~\".*_haproxy_.*\"}\n    | logfmt\n    | unwrap data_backend_queue\n    | __error__ = \"\" [1m]\n  )\n) by (data_backend_name)","refId":"A"}],"title":"Backend queue length (rolling avg, 1min)","transformations":[{"id":"labelsToFields","options":{"valueLabel":"data_backend_name"}}],"type":"timeseries"},{"datasource":null,"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"noValue":"-","thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":9},"id":8,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"multi"}},"targets":[{"expr":"sum (\n  avg_over_time(\n    {source=\"docker\", container_id=~\".*_haproxy_.*\"}\n    | logfmt\n    | unwrap data_feconn\n    | __error__ = \"\" [1m]\n  )\n) by (data_frontend_name_transport)","refId":"A"}],"title":"Frontend connections (rolling avg, 1 min)","transformations":[{"id":"labelsToFields","options":{"valueLabel":"data_frontend_name_transport"}}],"type":"timeseries"},{"datasource":null,"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":9},"id":6,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"multi"}},"targets":[{"expr":"sum (\n  avg_over_time(\n    {source=\"docker\", container_id=~\".*_haproxy_.*\"}\n    | logfmt\n    | unwrap data_beconn\n    | __error__ = \"\" [1m]\n  )\n) by (data_backend_name)","refId":"A"}],"title":"Backend connections (rolling avg, 1 min)","transformations":[{"id":"labelsToFields","options":{"valueLabel":"data_backend_name"}}],"type":"timeseries"}],"schemaVersion":30,"style":"dark","tags":[],"templating":{"list":[]},"time":{"from":"now-6h","to":"now"},"timepicker":{},"timezone":"","title":"HAProxy Details","uid":"YNFvUeV7z","version":4}