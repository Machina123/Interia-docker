{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":2,"links":[],"panels":[{"datasource":null,"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"opacity","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"noValue":"0","thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"reqps"},"overrides":[]},"gridPos":{"h":12,"w":12,"x":0,"y":0},"id":4,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"right"},"tooltip":{"mode":"multi"}},"targets":[{"expr":"sum by (container_id) (\n  rate(\n    {source=\"docker\"}\n    | logfmt\n    | data_status_code \u003e 0 or data_status \u003e 0\n    | __error__ = \"\" [1m]\n  )\n)","refId":"A"}],"title":"Avg no. of requests per container","transformations":[{"id":"labelsToFields","options":{"valueLabel":"container_id"}}],"type":"timeseries"},{"datasource":null,"description":"","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","axisSoftMin":0,"barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"opacity","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"noValue":"0","thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"binBps"},"overrides":[{"__systemRef":"hideSeriesFrom","matcher":{"id":"byNames","options":{"mode":"exclude","names":["patryk.staz.inpl.work"],"prefix":"All except:","readOnly":true}},"properties":[{"id":"custom.hideFrom","value":{"legend":false,"tooltip":false,"viz":true}}]}]},"gridPos":{"h":12,"w":12,"x":12,"y":0},"id":2,"options":{"legend":{"calcs":["last","max","mean"],"displayMode":"table","placement":"bottom"},"tooltip":{"mode":"single"}},"targets":[{"expr":"sum by (data_http_host) (\n  sum_over_time(\n    {source=\"docker\"}\n    | logfmt\n    | data_http_host != \"\"\n    | __error__ = \"\"\n    | unwrap data_bytes [1s]\n  )\n)","refId":"A"}],"title":"Current data throughput","transformations":[{"id":"labelsToFields","options":{"valueLabel":"data_http_host"}}],"type":"timeseries"},{"datasource":null,"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"hideFrom":{"legend":false,"tooltip":false,"viz":false}},"mappings":[],"noValue":"0","unit":"none"},"overrides":[]},"gridPos":{"h":8,"w":8,"x":0,"y":12},"id":6,"options":{"displayLabels":["percent","name"],"legend":{"displayMode":"table","placement":"right","values":["value","percent"]},"pieType":"pie","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"tooltip":{"mode":"multi"}},"targets":[{"expr":"sum by (data_handling) (\n  count_over_time(\n    {source=\"docker\"}\n    | logfmt\n    | data_handling != \"\"\n    | __error__ = \"\" [$__range]\n  )\n)","refId":"A"}],"title":"Total Varnish requests by handling","transformations":[{"id":"labelsToFields","options":{"valueLabel":"data_handling"}}],"type":"piechart"},{"datasource":null,"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"hideFrom":{"legend":false,"tooltip":false,"viz":false}},"mappings":[]},"overrides":[]},"gridPos":{"h":8,"w":8,"x":8,"y":12},"id":8,"options":{"displayLabels":["percent","name"],"legend":{"displayMode":"table","placement":"right","values":["value","percent"]},"pieType":"pie","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"tooltip":{"mode":"multi"}},"targets":[{"expr":"sum by (data_status_code) (\n  count_over_time(\n    {source=\"docker\",container_id=~\".*_varnish_.+\"}\n    | logfmt\n    | data_status_code \u003e 0\n    | __error__ = \"\" [$__range]\n  )\n)","refId":"A"}],"title":"Total Varnish requests by response code","transformations":[{"id":"labelsToFields","options":{"valueLabel":"data_status_code"}}],"type":"piechart"},{"datasource":null,"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"Âµs"},"overrides":[]},"gridPos":{"h":8,"w":8,"x":16,"y":12},"id":10,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.1.2","targets":[{"expr":"avg by (data_http_host) (\n  avg_over_time(\n    {source=\"docker\",container_id=~\".*_varnish_.+\"}\n    | logfmt\n    | data_duration_usec != \"\"\n    | data_duration_usec \u003e 0\n    | unwrap data_duration_usec\n    | __error__ = \"\" [$__range]\n  )\n)","refId":"A"}],"title":"Avg response time","transformations":[{"id":"labelsToFields","options":{"valueLabel":"data_http_host"}}],"type":"stat"}],"refresh":"10s","schemaVersion":30,"style":"dark","tags":[],"templating":{"list":[]},"time":{"from":"now-6h","to":"now"},"timepicker":{},"timezone":"","title":"Overview","uid":"KFlimP47k","version":4}