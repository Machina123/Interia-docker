{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":4,"links":[],"panels":[{"datasource":null,"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"hideFrom":{"legend":false,"tooltip":false,"viz":false}},"mappings":[],"noValue":"0","unit":"none"},"overrides":[]},"gridPos":{"h":8,"w":6,"x":0,"y":0},"id":2,"options":{"displayLabels":["percent","name"],"legend":{"displayMode":"table","placement":"right","values":["value","percent"]},"pieType":"pie","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"tooltip":{"mode":"multi"}},"targets":[{"expr":"sum by (data_handling) (\n  count_over_time(\n    {source=\"docker\"}\n    | logfmt\n    | data_handling != \"\"\n    | __error__ = \"\" [$__range]\n  )\n)","refId":"A"}],"title":"Total Varnish requests by handling","transformations":[{"id":"labelsToFields","options":{"valueLabel":"data_handling"}}],"type":"piechart"},{"datasource":null,"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"decimals":0,"mappings":[],"noValue":"0","thresholds":{"mode":"percentage","steps":[{"color":"red","value":null}]},"unit":"none"},"overrides":[{"matcher":{"id":"byFrameRefID"},"properties":[]}]},"gridPos":{"h":8,"w":6,"x":6,"y":0},"id":5,"options":{"displayMode":"gradient","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showUnfilled":true,"text":{}},"pluginVersion":"8.1.2","targets":[{"expr":"sum by (data_hit_miss)(count_over_time (\n      {source=\"docker\", container_id=~\".*_varnish_.*\"}\n      | logfmt\n      | data_hit_miss != \"\"\n      | __error__ = \"\"  [$__range]\n))","hide":false,"instant":false,"range":true,"refId":"A"}],"title":"Cache hit ratio","transformations":[{"id":"labelsToFields","options":{"valueLabel":"data_hit_miss"}},{"id":"calculateField","options":{"binary":{"left":"hit","operator":"+","reducer":"sum","right":"miss"},"mode":"reduceRow","reduce":{"include":["{data_hit_miss=\"hit\"}","{data_hit_miss=\"miss\"}"],"reducer":"sum"},"replaceFields":false}},{"id":"calculateField","options":{"binary":{"left":"hit","operator":"/","reducer":"sum","right":"hit + miss"},"mode":"binary","reduce":{"reducer":"sum"},"replaceFields":true}}],"type":"bargauge"},{"datasource":null,"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":14,"gradientMode":"opacity","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"Âµs"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":0},"id":4,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom"},"tooltip":{"mode":"single"}},"targets":[{"expr":"avg (\n  avg_over_time(\n    {source=\"docker\", container_id=~\".*_varnish_.*\"}\n    | logfmt\n    | unwrap data_duration_usec\n    | __error__ = \"\" [$__range]\n  )\n) by (data_http_host)","refId":"A"}],"title":"Average response time","transformations":[{"id":"labelsToFields","options":{"valueLabel":"data_http_host"}}],"type":"timeseries"}],"schemaVersion":30,"style":"dark","tags":[],"templating":{"list":[]},"time":{"from":"now-6h","to":"now"},"timepicker":{},"timezone":"","title":"Varnish details","uid":"7zZWf8V7k","version":3}