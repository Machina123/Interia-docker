{"annotations":{"list":[{"builtIn":1,"datasource":"-- Grafana --","enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","target":{"limit":100,"matchAny":false,"tags":[],"type":"dashboard"},"type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":3,"links":[],"panels":[{"datasource":null,"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"auto","displayMode":"auto","filterable":false},"displayName":"# of requests","mappings":[],"noValue":"0","thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":9,"w":12,"x":0,"y":0},"id":10,"options":{"showHeader":true},"pluginVersion":"8.1.2","targets":[{"expr":"topk(10, \n  sum (\n    count_over_time(\n      {source=\"docker\",container_id=~\".*_wpfront_.*\"}\n      | logfmt\n      | data_request != \"\"\n      | __error__ = \"\" [$__range]\n    )\n  ) by (data_host,data_request)\n)","instant":true,"range":false,"refId":"A"}],"title":"Most requested resources","transformations":[{"id":"groupBy","options":{"fields":{"Value #A":{"aggregations":["last"],"operation":"aggregate"},"data_host":{"aggregations":[],"operation":"groupby"},"data_request":{"aggregations":[],"operation":"groupby"}}}},{"id":"renameByRegex","options":{"regex":"data_(.*)","renamePattern":"$1"}},{"id":"sortBy","options":{"fields":{},"sort":[{"desc":true,"field":"Value #A (last)"}]}}],"type":"table"},{"datasource":null,"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"auto","displayMode":"auto","filterable":false},"displayName":"# of 4xx responses","mappings":[],"noValue":"0","thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":9,"w":12,"x":12,"y":0},"id":4,"options":{"showHeader":true},"pluginVersion":"8.1.2","targets":[{"expr":"sum (\n  count_over_time(\n    {source=\"docker\", container_id=~\".*_wpfront_.*\"}\n    | logfmt\n    | data_status \u003e= 400 and data_status \u003c 500\n    | __error__ = \"\" [$__range]\n  )\n) by (data_host, data_request)","instant":true,"range":false,"refId":"A"}],"title":"Requests with 4xx response","transformations":[{"id":"groupBy","options":{"fields":{"Value #A":{"aggregations":["last"],"operation":"aggregate"},"data_host":{"aggregations":[],"operation":"groupby"},"data_request":{"aggregations":[],"operation":"groupby"}}}},{"id":"renameByRegex","options":{"regex":"data_(.*)","renamePattern":"$1"}},{"id":"sortBy","options":{"fields":{},"sort":[{"desc":true,"field":"Value #A (last)"}]}}],"type":"table"},{"datasource":null,"description":"","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"percentage","steps":[{"color":"green","value":null},{"color":"red","value":75}]},"unit":"ms"},"overrides":[]},"gridPos":{"h":9,"w":12,"x":0,"y":9},"id":7,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{},"textMode":"auto"},"pluginVersion":"8.1.2","targets":[{"expr":"avg (\n  sum_over_time(\n    {source=\"docker\", container_id=~\".*_wpfront_.*\"}\n    | logfmt\n    | unwrap data_time_taken_ms\n    | __error__ = \"\" [$__range]\n  )\n) by (data_host)","refId":"A"}],"title":"Avg response time per host","transformations":[{"id":"labelsToFields","options":{"valueLabel":"data_host"}}],"type":"stat"},{"datasource":null,"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"auto","displayMode":"auto","filterable":false},"displayName":"# of 5xx responses","mappings":[],"noValue":"0","thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":9,"w":12,"x":12,"y":9},"id":11,"options":{"showHeader":true},"pluginVersion":"8.1.2","targets":[{"expr":"sum (\n  count_over_time(\n    {source=\"docker\", container_id=~\".*_wpfront_.*\"}\n    | logfmt\n    | data_status \u003e= 500\n    | __error__ = \"\" [$__range]\n  )\n) by (data_host, data_request)","instant":true,"range":false,"refId":"A"}],"title":"Requests with 5xx response","transformations":[{"id":"groupBy","options":{"fields":{"Value #A":{"aggregations":["last"],"operation":"aggregate"},"data_host":{"aggregations":[],"operation":"groupby"},"data_request":{"aggregations":[],"operation":"groupby"}}}},{"id":"renameByRegex","options":{"regex":"data_(.*)","renamePattern":"$1"}},{"id":"sortBy","options":{"fields":{},"sort":[{"desc":true,"field":"Value #A (last)"}]}}],"type":"table"},{"datasource":null,"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"hideFrom":{"legend":false,"tooltip":false,"viz":false}},"mappings":[]},"overrides":[]},"gridPos":{"h":8,"w":6,"x":0,"y":18},"id":9,"options":{"displayLabels":["percent","name"],"legend":{"displayMode":"table","placement":"right","values":["value","percent"]},"pieType":"pie","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"tooltip":{"mode":"multi"}},"targets":[{"expr":"sum (\n  count_over_time (\n    {source=\"docker\", container_id=~\".*_wpfront_.*\"}\n    | logfmt\n    | data_method != \"\"\n    | __error__ = \"\" [$__range]\n  )\n) by (data_method)","refId":"A"}],"title":"Total Apache requests per method","transformations":[{"id":"labelsToFields","options":{"valueLabel":"data_method"}}],"type":"piechart"},{"datasource":null,"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"hideFrom":{"legend":false,"tooltip":false,"viz":false}},"mappings":[]},"overrides":[]},"gridPos":{"h":8,"w":6,"x":6,"y":18},"id":13,"options":{"displayLabels":["percent","name"],"legend":{"displayMode":"table","placement":"right","values":["value","percent"]},"pieType":"pie","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"tooltip":{"mode":"single"}},"pluginVersion":"8.1.2","targets":[{"expr":"sum (\n  count_over_time(\n    {source=\"docker\", container_id=~\".*_wpfront_.*\"}\n    | logfmt\n    | data_status \u003e 0\n    | __error__ = \"\" [$__range]\n  )\n) by (data_status)","refId":"A"}],"title":"Total Apache requests by response code","transformations":[{"id":"labelsToFields","options":{"valueLabel":"data_status"}}],"type":"piechart"}],"refresh":"30s","schemaVersion":30,"style":"dark","tags":[],"templating":{"list":[]},"time":{"from":"now-6h","to":"now"},"timepicker":{},"timezone":"","title":"Apache details","uid":"tO2ncUVnk","version":6}